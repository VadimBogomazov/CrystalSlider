"use strict";var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?obj=>typeof obj:obj=>obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj,_createClass=(()=>{function a(b,c){for(var i=0,d;i<c.length;i++){d=c[i];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(b,d.key,d)}}return(b,c,d)=>{if(c)a(b.prototype,c);if(d)a(b,d);return b}})();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}(function(a){"use strict";var k=document,l=d(),m=f(),n=function(){function o(p){_classCallCheck(this,o);o._count=(o._count||0)+1;var q="crystal-slider",t=this;t.options={selector:".crystal-slider",activeSlide:1,loop:!0,fade:!1,duration:500,draggable:!0,adaptiveHeight:!1,threshold:30,captions:!1,keyboard:!1,easing:"ease-out",nav:!0,navPrevVal:"Prev",navNextVal:"Next",pagination:!0,thumbnails:!1,zIndex:98,onReady:()=>{},beforeChange:()=>{},afterChange:()=>{}};if(j(p)){t.options=Object.assign(t.options,p)}t._id=""+("crystal-slider-"+o._count);t._slider=k.querySelector(t.options.selector);if(t._slider===null){throw new Error("Selector "+t.options.selector+" does not exist")}t._sliderWidth=t._slider.getBoundingClientRect().width;t._slides=Array.from(t._slider.children);t._isTouchDevice=c();t._isMove=!1;t._isTouched=!1;t._container=null;t._track=null;t._nav=null;t._pagination=null;t._captions=null;t._transformX=null;t._touch=null;t._windowTimer=null;t._containerCls="crystal-slider__slides-container";t._trackCls="crystal-slider__track";t._slideCls="crystal-slider__slide";t._captionCls="crystal-slider__caption";t._navCls="crystal-slider-nav";t._navBtnCls=t._navCls+"__btn";t._navPrevBtnCls=t._navBtnCls+"_prev";t._navNextBtnCls=t._navBtnCls+"_next";t._paginationCls="crystal-slider-pagination";t._paginationInnerCls=t._paginationCls+"__inner";t._paginationItemCls=t._paginationCls+"__item";t._paginationBtnCls=t._paginationCls+"__btn";t._sliderReadyCls="is-ready";t._activeCls="is-active";t._draggableCls="is-draggable";t._touchCls="is-touch";t._disabledCls="is-disabled";t.slidesCount=t._slides.length;t.activeSlide=t.options.activeSlide;if(t.activeSlide<1||t.activeSlide>t.slidesCount){throw new Error("Slide index "+t.activeSlide+" does not exist")}t._bindEvents();t._init()}_createClass(o,[{key:"prevSlide",value:function p(){var t=this,q=t.options;if(t.activeSlide<=1&&!t.isEnabledOption("loop"))return;if(b(q.beforeChange)){q.beforeChange.call(t,t.activeSlide,t.slidesCount)}t.activeSlide<=1&&t.isEnabledOption("loop")?t.activeSlide=t.slidesCount:t.activeSlide-=1;t._setActiveSlide()}},{key:"nextSlide",value:function p(){var t=this,q=t.options;if(t.activeSlide>=t.slidesCount&&!t.isEnabledOption("loop"))return;if(b(q.beforeChange)){q.beforeChange.call(t,t.activeSlide,t.slidesCount)}t.activeSlide>=t.slidesCount&&t.isEnabledOption("loop")?t.activeSlide=1:t.activeSlide+=1;t._setActiveSlide()}},{key:"goToSlide",value:function p(q){var t=this,r=this.options;if(Number.isInteger(q)||q<1&&q>t.slidesCount)return;t._callSliderEvent(r.beforeChange,t.activeSlide,t.slidesCount);t.activeSlide=q;t._setActiveSlide()}},{key:"isEnabledOption",value:function p(q){return this.options[q]===!0||!1}},{key:"_setPosition",value:function p(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=this,r=t.options,s=t._slides,u=t._container.style,v=t._track.style;t._isMove=!0;if(!t.isEnabledOption("fade")){t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1));v[l]="translate3d("+t._transformX+"px, 0, 0)";v.webkitTransition="-webkit-transform "+r.duration+"ms "+r.easing;v.transition="transform "+r.duration+"ms "+r.easing}if(t.isEnabledOption("adaptiveHeight")){u.webkitTransition="height "+r.duration+"ms "+r.easing;u.transition="height "+r.duration+"ms "+r.easing}setTimeout(()=>{v.webkitTransition="";v.transition="";if(t.isEnabledOption("adaptiveHeight")){u.webkitTransition="";u.transition=""}t._isMove=!1;if(q){t._callSliderEvent(r.afterChange,t.activeSlide,t.slidesCount)}},r.duration)}},{key:"_disableNavBtns",value:function p(){var t=this,q=t.options,r=t._slider,s=t._slides,u=t._nav,v=t.activeSlide;if(t.isEnabledOption("nav")&&!t.isEnabledOption("loop")){u.querySelectorAll("."+t._navBtnCls).forEach(elem=>elem.classList.remove(t._disabledCls));if(v<=1){u.querySelector("."+t._navPrevBtnCls).classList.add(t._disabledCls)}else if(v>=s.length){u.querySelector("."+t._navNextBtnCls).classList.add(t._disabledCls)}}}},{key:"_setActiveSlide",value:function p(){var t=this,q=t.options,r=t._slider,s=t._slides,u=t._pagination;s.forEach(v=>{if(t.isEnabledOption("fade")){v.style.opacity=0;v.style.zIndex=q.zIndex-1}v.classList.remove(t._activeCls)});if(t.isEnabledOption("fade")){s[t.activeSlide-1].style.opacity=1;s[t.activeSlide-1].style.zIndex=q.zIndex}s[t.activeSlide-1].classList.add(t._activeCls);if(t.isEnabledOption("pagination")&&t.slidesCount>1){u.querySelectorAll("."+t._paginationBtnCls).forEach(elem=>elem.classList.remove(t._activeCls));u.querySelectorAll("."+t._paginationBtnCls)[t.activeSlide-1].classList.add(t._activeCls)}if(t.slidesCount>1){t._disableNavBtns();t._setHeight();t._setPosition()}else{t._setPosition(!1)}}},{key:"_callSliderEvent",value:function p(q,r){if(b(q)){q.apply(this,[].concat(Array.prototype.slice.call(arguments)).shift())}}},{key:"_resetDrag",value:function p(){var t=this;t._dragCoords.start=0;t._dragCoords.end=0}},{key:"_setHeight",value:function p(){var t=this,q=t.options,r=t._container;if(!t.isEnabledOption("adaptiveHeight"))return;r.style.height=t._slides[t.activeSlide-1].clientHeight+"px"}},{key:"_init",value:function p(){var t=this,q=t.options,r=t._slider,s=t._slides,u=s[t.activeSlide-1],v=k.createElement("div"),w=k.createElement("div"),x=k.createDocumentFragment();t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1));r.id=t._id;r.classList.add(t._id);if(t.isEnabledOption("draggable")){r.classList.add(t._draggableCls)}w.classList.add(t._trackCls);w.style.width=t._sliderWidth*t.slidesCount+"px";w.style[l]="translate3d("+t._transformX+"px, 0, 0)";v.classList.add(t._containerCls);v.appendChild(w);r.appendChild(v);s.forEach((y,z)=>{var A=y.style;y.classList.add(t._slideCls);y.setAttribute("data-crystal-slide",z+1);A.width=100/t.slidesCount+"%";if(t.isEnabledOption("fade")){A.transition="opacity "+q.duration+"ms "+q.easing;A.left=-(parseInt(A.width)*z)+"%"}if(t.isEnabledOption("fade")&&z!==t.activeSlide-1){A.opacity=0;A.zIndex=q.zIndex-1}if(t.isEnabledOption("captions")){var B=k.createElement("div");B.classList.add(t._captionCls);B.innerHTML=y.getAttribute("data-crystal-caption");y.appendChild(B)}x.appendChild(y)});if(t.isEnabledOption("captions")){t._captions=r.querySelectorAll(""+t._captionCls)}w.appendChild(x);u.style.opacity=1;u.style.zIndex=q.zIndex;u.classList.add(t._activeCls);t._container=v;t._track=w;if(t.isEnabledOption("nav")){t._createNav()}if(t.isEnabledOption("pagination")){t._createPagination()}r.classList.add(t._sliderReadyCls);t._callSliderEvent(q.onReady,t.activeSlide,t.slidesCount)}},{key:"_createNav",value:function p(){var t=this,q=t.options,r=k.createElement("div");r.classList.add(t._navCls);r.innerHTML="\n        <button role=\"button\" class=\""+(t._navBtnCls+" "+t._navPrevBtnCls)+"\" data-crystal-button=\"prev\">"+q.navPrevVal+"</button>\n\n        <button role=\"button\" class=\""+(t._navBtnCls+" "+t._navNextBtnCls)+"\" data-crystal-button=\"next\">"+q.navNextVal+"</button>\n      ";t._nav=r;t._slider.appendChild(t._nav)}},{key:"_createPagination",value:function p(){var t=this,q=t.options,r=k.createElement("ul"),s=k.createDocumentFragment();t._pagination=k.createElement("div");t._pagination.classList.add(t._paginationCls);r.classList.add(t._paginationInnerCls);t._slides.forEach((u,v)=>{var w=k.createElement("li"),x=void 0;if(!t.isEnabledOption("thumbnails")){x=k.createElement("button");x.textContent=v+1}else{x=k.createElement("img");x.src=u.getAttribute("data-crystal-thumbnail")}x.setAttribute("role","button");x.setAttribute("data-crystal-button",v+1);x.classList.add(t._paginationBtnCls);w.appendChild(x);w.classList.add(t._paginationItemCls);s.appendChild(w)});r.appendChild(s);t._pagination.appendChild(r);t._slider.appendChild(t._pagination);t._pagination.querySelectorAll("."+t._paginationBtnCls)[t.activeSlide-1].classList.add(t._activeCls);t._disableNavBtns()}},{key:"destroy",value:function p(){var t=this,q=t._slider;if(t.isEnabledOption("keyboard")){a.removeEventListener("keyup",t._keyUpHandler)}a.removeEventListener("resize",t._resizeHandler);if(t.isEnabledOption("nav")||t.isEnabledOption("pagination")){q.removeEventListener("click",t._mouseClickHandler)}if(t.isEnabledOption("draggable")){q.removeEventListener("mousedown",t._touchStartHandler);q.removeEventListener("mousemove",t._touchMoveHandler);q.removeEventListener("mouseup",t._touchEndHandler);q.removeEventListener("mouseleave",t._touchEndHandler)}q.removeAttribute("id");q.classList.remove(t._sliderReadyCls);q.classList.remove(t._id);q.classList.remove(t._draggableCls);if(t.isEnabledOption("nav")){h(t._nav)}if(t.isEnabledOption("pagination")){h(t._pagination)}if(t.isEnabledOption("captions")){q.querySelectorAll("."+t._captionCls).forEach(caption=>h(caption))}t._slides.forEach(r=>{r.classList.remove(t._slideCls);r.classList.remove(t._activeCls);r.removeAttribute("style");r.removeAttribute("data-crystal-slide")});g(t._track);g(t._container);if(t._windowTimer){clearTimeout(t._windowTimer)}}},{key:"reinit",value:function p(q){var t=this;t.destroy();if(j(q)){t.options=Object.assign(t.options,q)}t.slidesCount=t._slides.length;t.activeSlide=t.options.activeSlide;t._bindEvents();t._init()}},{key:"_bindEvents",value:function p(){var t=this,q=["_mouseClickHandler","_touchStartHandler","_touchMoveHandler","_touchEndHandler","_keyUpHandler","_transitionEndHandler","_setHeight","_updateWidth","_resizeHandler"];q.forEach(r=>{t[r]=t[r].bind(t)});if(t.isEnabledOption("adaptiveHeight")){a.addEventListener("load",t._setHeight)}a.addEventListener("DOMContentLoaded",t._updateWidth);a.addEventListener("resize",t._resizeHandler);if(t.isEnabledOption("keyboard")){a.addEventListener("keyup",t._keyUpHandler)}if(t.isEnabledOption("nav")||t.isEnabledOption("pagination")){t._slider.addEventListener("click",t._mouseClickHandler)}t._slider.addEventListener(m,t._transitionEndHandler);if(t.isEnabledOption("draggable")){t._dragCoords={start:0,end:0};t._slider.addEventListener(t._isTouchDevice?"touchstart":"mousedown",t._touchStartHandler,!1);t._slider.addEventListener(t._isTouchDevice?"touchmove":"mousemove",t._touchMoveHandler,!1);t._slider.addEventListener(t._isTouchDevice?"touchend":"mouseup",t._touchEndHandler,!1);t._slider.addEventListener("mouseleave",t._touchEndHandler)}}},{key:"_touchStartHandler",value:function p(e){e.preventDefault();e.stopPropagation();var t=this;console.log(e.target);if(t._isMove||e.type==="mousedown"&&e.button>0)return;if(t._isTouchDevice&&e.touches.length===1){t._touch=e.changedTouches[0]}t._isTouched=!0;t._dragCoords.end=t._dragCoords.start=t._touch?t._touch.pageX:e.pageX;t._slider.classList.add(t._touchCls)}},{key:"_touchMoveHandler",value:function p(e){e.preventDefault();e.stopPropagation();var t=this;if(!t._isTouched||t._isMove)return;if(t._isTouchDevice){if(e.changedTouches[0].identifier!==t._touch.identifier)return}t._dragCoords.end=t._touch?e.changedTouches[0].pageX:e.pageX;if(!t.isEnabledOption("fade")){t._track.style.transform="translate3d("+(t._transformX+(t._dragCoords.end-t._dragCoords.start))+"px, 0, 0)"}}},{key:"_touchEndHandler",value:function p(e){e.preventDefault();e.stopPropagation();var t=this,q=t.options,r=t._dragCoords.start,s=t._dragCoords.end,u=r-s,v=t.activeSlide;if(t._isMove)return;if(t._isTouchDevice){if(e.changedTouches[0].identifier!==t._touch.identifier)return}t._isTouched=!1;t._slider.classList.remove(t._touchCls);t._resetDrag();if(!u)return;if(Math.abs(u)<=q.threshold){t._setPosition(!1);return}if(!q.loop){if(v<=1&&u<0||v>=t.slidesCount&&u>0){t._setPosition(!1);return}}r>s?t.nextSlide():t.prevSlide()}},{key:"_mouseClickHandler",value:function p(e){var t=this,q=t.options,r=e.target,s=r.classList,u=+r.getAttribute("data-crystal-button");if(t._isTouched||t._isMove)return;if(s.contains(t._navBtnCls)){r.getAttribute("data-crystal-button")==="prev"?t.prevSlide():t.nextSlide()}if(s.contains(t._paginationBtnCls)&&u!==t.activeSlide)t.goToSlide(u)}},{key:"_transitionEndHandler",value:function p(){var t=this;t._slider.classList.remove(t._touchCls)}},{key:"_keyUpHandler",value:function p(e){e.preventDefault();e.stopPropagation();var t=this,q={left:37,right:39};if(t._isMove||!t.isEnabledOption("keyboard"))return;switch(e.keyCode){case q.left:t.prevSlide();break;case q.right:t.nextSlide();break;}}},{key:"_updateWidth",value:function p(){var t=this,q=t._track;if(t._windowTimer){clearTimeout(t._windowTimer)}t._windowTimer=setTimeout(()=>{t.windowWidth=a.innerWidth;t._sliderWidth=t._slider.getBoundingClientRect().width;if(!t.isEnabledOption("fade")){t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1))}q.style.width=t._sliderWidth*t.slidesCount+"px";q.style[l]="translate3d("+t._transformX+"px, 0, 0)";t._setHeight()},50)}},{key:"_resizeHandler",value:function p(){this._updateWidth()}}]);return o}();a.CrystalSlider=n;function b(o){return o&&{}.toString.call(o)==="[object Function]"}function c(){return!!("ontouchstart"in a||navigator.maxTouchPoints)}function d(){var o=k.createElement("div");if(o.style.transform===null){if(o.style.WebkitTransform!==void 0){return"WebkitTransform"}}return"transform"}function f(){var o=k.createElement("div"),p={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in p){if(p.hasOwnProperty(i)&&o.style[i]!==void 0)return p[i]}}function g(o){var p=document.createDocumentFragment();while(o.firstChild){var q=o.removeChild(o.firstChild);p.appendChild(q)}o.parentNode.replaceChild(p,o)}function h(o){o.parentNode.removeChild(o)}function j(o){if(o===null)return;return typeof o=="function"||(typeof o=="undefined"?"undefined":_typeof(o))==="object"}})(window);