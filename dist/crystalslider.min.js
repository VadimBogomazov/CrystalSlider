"use strict";var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?obj=>typeof obj:obj=>obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj,_createClass=(()=>{function a(b,c){for(var i=0,d;i<c.length;i++){d=c[i];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(b,d.key,d)}}return(b,c,d)=>{if(c)a(b.prototype,c);if(d)a(b,d);return b}})();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}(function(){"use strict";var j=document,k=c(),l=d(),m="crystal-slider",n={selector:".crystal-slider",activeSlide:1,loop:!0,fade:!1,duration:500,draggable:!0,adaptiveHeight:!1,threshold:30,captions:!1,keyboard:!1,easing:"ease-out",nav:!0,navPrevVal:"Prev",navNextVal:"Next",pagination:!1,thumbnails:!1,zIndex:98,onReady:()=>{},beforeChange:()=>{},afterChange:()=>{}},o=function(){function p(q){_classCallCheck(this,p);p._count=(p._count||0)+1;var t=this;t.options=Object.assign(n,q);t._id=""+("crystal-slider-"+p._count);t._init();t._build();t._bindEvents()}_createClass(p,[{key:"prevSlide",value:function q(){var t=this,r=t.options;if(t.activeSlide<=1&&!t.isEnabledOption("loop"))return;if(a(r.beforeChange)){r.beforeChange.call(t,t.activeSlide,t.slidesCount)}t.activeSlide<=1&&t.isEnabledOption("loop")?t.activeSlide=t.slidesCount:t.activeSlide-=1;t._setActiveSlide()}},{key:"nextSlide",value:function q(){var t=this,r=t.options;if(t.activeSlide>=t.slidesCount&&!t.isEnabledOption("loop"))return;if(a(r.beforeChange)){r.beforeChange.call(t,t.activeSlide,t.slidesCount)}t.activeSlide>=t.slidesCount&&t.isEnabledOption("loop")?t.activeSlide=1:t.activeSlide+=1;t._setActiveSlide()}},{key:"goToSlide",value:function q(r){var t=this,s=this.options;if(!Number.isInteger(r)||r<1&&r>t.slidesCount)return;t._callSliderEvent(s.beforeChange,t.activeSlide,t.slidesCount);t.activeSlide=r;t._setActiveSlide()}},{key:"isEnabledOption",value:function q(r){return this.options[r]===!0||!1}},{key:"destroy",value:function q(){var t=this,r=t._slider,s=t._track;if(t.isEnabledOption("keyboard")){window.removeEventListener("keyup",t._keyUpHandler)}window.removeEventListener("resize",t._resizeHandler);if(t.isEnabledOption("nav")||t.isEnabledOption("pagination")){r.removeEventListener("click",t._mouseClickHandler)}if(t.isEnabledOption("draggable")){s.removeEventListener(t._isTouchDevice?"touchstart":"mousedown",t._touchStartHandler);s.removeEventListener(t._isTouchDevice?"touchmove":"mousemove",t._touchMoveHandler);s.removeEventListener(t._isTouchDevice?"touchend":"mouseup",t._touchEndHandler);s.removeEventListener("mouseleave",t._touchEndHandler)}r.removeAttribute("id");r.classList.remove(t._sliderReadyCls,t._id,t._draggableCls);if(t.isEnabledOption("nav")){g(t._nav)}if(t.isEnabledOption("pagination")){g(t._pagination)}if(t.isEnabledOption("captions")){r.querySelectorAll("."+t._captionCls).forEach(caption=>g(caption))}t._slides.forEach(u=>{u.classList.remove(t._slideCls,t._activeCls);u.removeAttribute("style");u.removeAttribute("data-crystal-slide")});f(t._track);f(t._container);if(t._windowTimer){clearTimeout(t._windowTimer)}}},{key:"reinit",value:function q(r){var t=this;t.destroy();if(h(r)){t.options=Object.assign(n,r)}t.slidesCount=t._slides.length;t.activeSlide=t.options.activeSlide;t._build();t._bindEvents();if(t.isEnabledOption("adaptiveHeight")){t._setHeight()}}},{key:"_setPosition",value:function q(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=this,s=t.options,u=t._slides,v=t._container.style,w=t._track.style;t._isMove=!0;if(!t.isEnabledOption("fade")){t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1));w[k]="translate3d("+t._transformX+"px, 0, 0)";w.webkitTransition="-webkit-transform "+s.duration+"ms "+s.easing;w.transition="transform "+s.duration+"ms "+s.easing}if(t.isEnabledOption("adaptiveHeight")){v.webkitTransition="height "+s.duration+"ms "+s.easing;v.transition="height "+s.duration+"ms "+s.easing}setTimeout(()=>{w.webkitTransition="";w.transition="";if(t.isEnabledOption("adaptiveHeight")){v.webkitTransition="";v.transition=""}t._isMove=!1;if(r){t._callSliderEvent(s.afterChange,t.activeSlide,t.slidesCount)}},s.duration)}},{key:"_disableNavBtns",value:function q(){var t=this,r=t.options,s=t._slider,u=t._slides,v=t._nav,w=t.activeSlide;if(t.isEnabledOption("nav")&&!t.isEnabledOption("loop")){v.querySelectorAll("."+t._navBtnCls).forEach(elem=>elem.classList.remove(t._disabledCls));if(w<=1){v.querySelector("."+t._navPrevBtnCls).classList.add(t._disabledCls)}else if(w>=u.length){v.querySelector("."+t._navNextBtnCls).classList.add(t._disabledCls)}}}},{key:"_setActiveSlide",value:function q(){var t=this,r=t.options,s=t._slider,u=t._slides,v=t._pagination;u.forEach(w=>{if(t.isEnabledOption("fade")){w.style.opacity=0;w.style.zIndex=r.zIndex-1}w.classList.remove(t._activeCls)});if(t.isEnabledOption("fade")){u[t.activeSlide-1].style.opacity=1;u[t.activeSlide-1].style.zIndex=r.zIndex}u[t.activeSlide-1].classList.add(t._activeCls);if(t.isEnabledOption("pagination")&&t.slidesCount>1){v.querySelectorAll("."+t._paginationBtnCls).forEach(elem=>elem.classList.remove(t._activeCls));v.querySelectorAll("."+t._paginationBtnCls)[t.activeSlide-1].classList.add(t._activeCls)}if(t.slidesCount>1){t._disableNavBtns();if(t.isEnabledOption("adaptiveHeight")){t._setHeight()}t._setPosition()}else{t._setPosition(!1)}}},{key:"_callSliderEvent",value:function q(r,s){if(a(r)){r.apply(this,[].concat(Array.prototype.slice.call(arguments)).slice(1))}}},{key:"_resetDrag",value:function q(){var t=this;t._dragCoords.start=0;t._dragCoords.end=0}},{key:"_setHeight",value:function q(){var t=this,r=t.options,s=t._container;s.style.height=t._slides[t.activeSlide-1].clientHeight+"px"}},{key:"_init",value:function q(){var t=this;console.log(this);t._slider=j.querySelector(t.options.selector);if(t._slider===null){throw new Error("Selector "+t.options.selector+" does not exist")}t._sliderWidth=t._slider.getBoundingClientRect().width;t._slides=Array.from(t._slider.children);t._isTouchDevice=b();t._isMove=!1;t._isTouched=!1;t._container=null;t._track=null;t._nav=null;t._pagination=null;t._transformX=null;t._touch=null;t._windowTimer=null;if(t.options.draggable===!0){t._dragCoords={start:0,end:0}}t._sliderReadyCls="crystal-slider_ready";t._containerCls="crystal-slider__slides-container";t._trackCls="crystal-slider__track";t._slideCls="crystal-slider__slide";t._captionCls="crystal-slider__caption";t._navCls="crystal-slider-nav";t._navBtnCls=t._navCls+"__btn";t._navPrevBtnCls=t._navBtnCls+"_prev";t._navNextBtnCls=t._navBtnCls+"_next";t._paginationCls="crystal-slider-pagination";t._paginationInnerCls=t._paginationCls+"__inner";t._paginationItemCls=t._paginationCls+"__item";t._paginationBtnCls=t._paginationCls+"__btn";t._activeCls="is-active";t._draggableCls="is-draggable";t._touchCls="is-touch";t._disabledCls="is-disabled";t.slidesCount=t._slides.length;t.activeSlide=t.options.activeSlide;if(t.activeSlide<1||t.activeSlide>t.slidesCount){throw new Error("Slide index "+t.activeSlide+" does not exist")}}},{key:"_build",value:function q(){var t=this,r=t.options,s=t._slider,u=t._slides,v=u[t.activeSlide-1],w=j.createElement("div"),x=j.createElement("div"),y=j.createDocumentFragment();t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1));s.setAttribute("data-crystal-id",t._id);s.classList.add(t._id);if(t.isEnabledOption("draggable")){s.classList.add(t._draggableCls)}x.classList.add(t._trackCls);x.style.width=t._sliderWidth*t.slidesCount+"px";x.style[k]="translate3d("+t._transformX+"px, 0, 0)";w.classList.add(t._containerCls);w.appendChild(x);s.appendChild(w);u.forEach((z,A)=>{var B=z.style;z.classList.add(t._slideCls);z.setAttribute("data-crystal-slide",A+1);B.width=100/t.slidesCount+"%";if(t.isEnabledOption("fade")){B.transition="opacity "+r.duration+"ms "+r.easing;B.left=-(parseInt(B.width)*A)+"%"}if(t.isEnabledOption("fade")&&A!==t.activeSlide-1){B.opacity=0;B.zIndex=r.zIndex-1}if(t.isEnabledOption("captions")){var C=j.createElement("div");C.classList.add(t._captionCls);C.innerHTML=z.getAttribute("data-crystal-caption");z.appendChild(C)}y.appendChild(z)});if(t.isEnabledOption("captions")){t._captions=s.querySelectorAll(""+t._captionCls)}x.appendChild(y);v.style.opacity=1;v.style.zIndex=r.zIndex;v.classList.add(t._activeCls);t._container=w;t._track=x;if(t.isEnabledOption("nav")){t._createNav()}if(t.isEnabledOption("pagination")){t._createPagination()}s.classList.add(t._sliderReadyCls);t._callSliderEvent(r.onReady,t.activeSlide,t.slidesCount)}},{key:"_createNav",value:function q(){var t=this,r=t.options,s=j.createElement("div");s.classList.add(t._navCls);s.innerHTML="\n        <button role=\"button\" class=\""+(t._navBtnCls+" "+t._navPrevBtnCls)+"\" data-crystal-button=\"prev\">"+r.navPrevVal+"</button>\n\n        <button role=\"button\" class=\""+(t._navBtnCls+" "+t._navNextBtnCls)+"\" data-crystal-button=\"next\">"+r.navNextVal+"</button>\n      ";t._nav=s;t._slider.appendChild(t._nav)}},{key:"_createPagination",value:function q(){var t=this,r=t.options,s=j.createElement("ul"),u=j.createDocumentFragment();t._pagination=j.createElement("div");t._pagination.classList.add(t._paginationCls);s.classList.add(t._paginationInnerCls);t._slides.forEach((v,w)=>{var x=j.createElement("li"),y=void 0;if(!t.isEnabledOption("thumbnails")){y=j.createElement("button");y.textContent=w+1}else{y=j.createElement("img");y.src=v.getAttribute("data-crystal-thumbnail")}y.setAttribute("role","button");y.setAttribute("data-crystal-button",w+1);y.classList.add(t._paginationBtnCls);x.appendChild(y);x.classList.add(t._paginationItemCls);u.appendChild(x)});s.appendChild(u);t._pagination.appendChild(s);t._slider.appendChild(t._pagination);t._pagination.querySelectorAll("."+t._paginationBtnCls)[t.activeSlide-1].classList.add(t._activeCls);t._disableNavBtns()}},{key:"_bindEvents",value:function q(){var t=this,r=["_mouseClickHandler","_touchStartHandler","_touchMoveHandler","_touchEndHandler","_keyUpHandler","_transitionEndHandler","_setHeight","_updateWidth","_resizeHandler"];r.forEach(s=>{t[s]=t[s].bind(t)});window.addEventListener("DOMContentLoaded",t._updateWidth);window.addEventListener("resize",t._resizeHandler);if(t.isEnabledOption("adaptiveHeight")){window.addEventListener("load",t._setHeight)}if(t.isEnabledOption("keyboard")){window.addEventListener("keyup",t._keyUpHandler)}if(t.isEnabledOption("nav")||t.isEnabledOption("pagination")){t._slider.addEventListener("click",t._mouseClickHandler)}t._slider.addEventListener(l,t._transitionEndHandler);if(t.isEnabledOption("draggable")){t._dragCoords={start:0,end:0};t._track.addEventListener(t._isTouchDevice?"touchstart":"mousedown",t._touchStartHandler,!1);t._track.addEventListener(t._isTouchDevice?"touchmove":"mousemove",t._touchMoveHandler,!1);t._track.addEventListener(t._isTouchDevice?"touchend":"mouseup",t._touchEndHandler,!1);t._track.addEventListener("mouseleave",t._touchEndHandler)}}},{key:"_touchStartHandler",value:function q(e){e.preventDefault();e.stopPropagation();var t=this;if(t._isMove||e.type==="mousedown"&&e.button>0)return;if(t._isTouchDevice&&e.touches.length===1){t._touch=e.changedTouches[0]}t._isTouched=!0;t._dragCoords.end=t._dragCoords.start=t._touch?t._touch.pageX:e.pageX;t._slider.classList.add(t._touchCls)}},{key:"_touchMoveHandler",value:function q(e){e.preventDefault();e.stopPropagation();var t=this;if(!t._isTouched||t._isMove)return;if(t._isTouchDevice){if(e.changedTouches[0].identifier!==t._touch.identifier)return}t._dragCoords.end=t._touch?e.changedTouches[0].pageX:e.pageX;if(!t.isEnabledOption("fade")){t._track.style.transform="translate3d("+(t._transformX+(t._dragCoords.end-t._dragCoords.start))+"px, 0, 0)"}}},{key:"_touchEndHandler",value:function q(e){e.preventDefault();e.stopPropagation();var t=this,r=t.options,s=t._dragCoords.start,u=t._dragCoords.end,v=s-u,w=t.activeSlide;if(t._isMove)return;if(t._isTouchDevice){if(e.changedTouches[0].identifier!==t._touch.identifier)return}t._isTouched=!1;t._slider.classList.remove(t._touchCls);t._resetDrag();if(!v)return;if(Math.abs(v)<=r.threshold){t._setPosition(!1);return}if(!r.loop){if(w<=1&&v<0||w>=t.slidesCount&&v>0){t._setPosition(!1);return}}s>u?t.nextSlide():t.prevSlide()}},{key:"_mouseClickHandler",value:function q(e){var t=this,r=t.options,s=e.target,u=s.classList,v=Number(s.getAttribute("data-crystal-button"));if(t._isTouched||t._isMove)return;if(u.contains(t._navBtnCls)){s.getAttribute("data-crystal-button")==="prev"?t.prevSlide():t.nextSlide()}if(u.contains(t._paginationBtnCls)&&v!==t.activeSlide)t.goToSlide(v)}},{key:"_transitionEndHandler",value:function q(){var t=this;t._slider.classList.remove(t._touchCls)}},{key:"_keyUpHandler",value:function q(e){e.preventDefault();e.stopPropagation();var t=this,r={left:37,right:39};if(t._isMove||!t.isEnabledOption("keyboard"))return;switch(e.keyCode){case r.left:t.prevSlide();break;case r.right:t.nextSlide();break;}}},{key:"_updateWidth",value:function q(){var t=this,r=t._track;if(t._windowTimer){clearTimeout(t._windowTimer)}t._windowTimer=setTimeout(()=>{t.windowWidth=window.innerWidth;t._sliderWidth=t._slider.getBoundingClientRect().width;if(!t.isEnabledOption("fade")){t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1))}r.style.width=t._sliderWidth*t.slidesCount+"px";r.style[k]="translate3d("+t._transformX+"px, 0, 0)";if(t.isEnabledOption("adaptiveHeight")){t._setHeight()}},50)}},{key:"_resizeHandler",value:function q(){this._updateWidth()}}]);return p}();window.CrystalSlider=o;function a(p){return p&&{}.toString.call(p)==="[object Function]"}function b(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}function c(){var p=j.createElement("div");if(p.style.transform===null){if(p.style.WebkitTransform!==void 0){return"WebkitTransform"}}return"transform"}function d(){var p=j.createElement("div"),q={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in q){if(q.hasOwnProperty(i)&&p.style[i]!==void 0)return q[i]}}function f(p){var q=document.createDocumentFragment();while(p.firstChild){var r=p.removeChild(p.firstChild);q.appendChild(r)}p.parentNode.replaceChild(q,p)}function g(p){p.parentNode.removeChild(p)}function h(p){if(p===null)return;return typeof p=="function"||(typeof p=="undefined"?"undefined":_typeof(p))==="object"}})();