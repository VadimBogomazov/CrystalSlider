!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CrystalSlider=t():e.CrystalSlider=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){for(var e={},t=0;t<arguments.length;t+=1)for(var i=arguments[t],n=Object.keys(i),a=0;a<n.length;a+=1)e[n[a]]=i[n[a]];return e}function a(){var e=_.createElement("div");return null===e.style.transform&&void 0!==e.style.WebkitTransform?"WebkitTransform":"transform"}function s(){var e=_.createElement("div"),t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in t)if(t.hasOwnProperty(i)&&void 0!==e.style[i])return t[i]}function o(e){for(var t=_.createDocumentFragment();e.firstChild;){var i=e.removeChild(e.firstChild);t.appendChild(i)}e.parentNode.replaceChild(t,e)}function l(e){e.parentNode.removeChild(e)}function r(e){return e&&"[object Function]"==={}.toString.call(e)}function d(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}function c(e){if(null!==e)return"function"==typeof e||"object"===("undefined"==typeof e?"undefined":v(e))}function u(e){return!isNaN(parseFloat(e))&&isFinite(e)}Object.defineProperty(t,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_=document,h=a(),f=s(),g="crystal-slider",y=function(){function e(t){i(this,e),e._count=(e._count||0)+1;var a=this;a.options={selector:"."+g,activeSlide:1,loop:!0,autoplay:!1,playInterval:5e3,pauseOnHover:!1,fade:!1,zIndex:98,duration:500,draggable:!0,adaptiveHeight:!1,threshold:30,titles:!1,keyboard:!1,easing:"ease-out",nav:!0,navPrevVal:"Prev",navNextVal:"Next",appendNavTo:null,pagination:!1,thumbnails:!1,appendPaginationTo:null,sliderReadyCls:g+"_ready",containerCls:g+"__slides-container",trackCls:g+"__track",slideCls:g+"__slide",titleCls:g+"__title",navCls:g+"-nav",navBtnCls:g+"-nav__btn",navPrevBtnCls:g+"-nav__btn_prev",navNextBtnCls:g+"-nav__btn_next",paginationCls:g+"-pagination",paginationInnerCls:g+"-pagination__inner",paginationItemCls:g+"-pagination__item",paginationBtnCls:g+"-pagination__btn",activeCls:"is-active",draggableCls:"is-draggable",touchCls:"is-touch",disabledCls:"is-disabled",onReady:function(){},beforeChange:function(){},afterChange:function(){}},c(t)&&(a.options=n(a.options,t)),a._id=""+(g+"-"+e._count),a._isTouchDevice=d(),a._init(),a._build(),a._bindEvents()}return p(e,[{key:"_setPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,i=t.options,n=(t._slides,t._container.style),a=t._track.style;t._isMove=!0,t.isEnabledOption("fade")||(t._transformX=Math.ceil(-t._sliderWidth*(t.activeSlide-1)),a[h]="translate3d("+t._transformX+"px, 0, 0)",a.webkitTransition="-webkit-transform "+i.duration+"ms "+i.easing,a.transition="transform "+i.duration+"ms "+i.easing),t.isEnabledOption("adaptiveHeight")&&(n.webkitTransition="height "+i.duration+"ms "+i.easing,n.transition="height "+i.duration+"ms "+i.easing),setTimeout(function(){a.webkitTransition="",a.transition="",t.isEnabledOption("adaptiveHeight")&&(n.webkitTransition="",n.transition=""),t._isMove=!1,t._play&&t.play(),e&&r(i.afterChange)&&t._callSliderEvent(i.afterChange,t,t.activeSlide,t.slidesLength)},i.duration)}},{key:"_disableNavBtns",value:function(){var e=this,t=e.options,i=(e._slider,e._slides),n=e._nav,a=e.activeSlide;e.isEnabledOption("nav")&&!e.isEnabledOption("loop")&&(n.querySelectorAll("."+t.navBtnCls).forEach(function(e){return e.classList.remove(t.disabledCls)}),a<=1?n.querySelector("."+t.navPrevBtnCls).classList.add(t.disabledCls):a>=i.length&&n.querySelector("."+t.navNextBtnCls).classList.add(t.disabledCls))}},{key:"_setActiveSlide",value:function(){var e=this,t=e.options,i=(e._slider,e._slides),n=e._pagination;i.forEach(function(i){e.isEnabledOption("fade")&&(i.style.opacity=0,i.style.zIndex=t.zIndex-1),i.classList.remove(t.activeCls)}),e.isEnabledOption("fade")&&(i[e.activeSlide-1].style.opacity=1,i[e.activeSlide-1].style.zIndex=t.zIndex),i[e.activeSlide-1].classList.add(t.activeCls),e.isEnabledOption("pagination")&&e.slidesLength>1&&([].slice.call(n.querySelectorAll("."+t.paginationBtnCls)).forEach(function(e){return e.classList.remove(t.activeCls)}),n.querySelectorAll("."+t.paginationBtnCls)[e.activeSlide-1].classList.add(t.activeCls)),e.slidesLength>1?(e._disableNavBtns(),e.isEnabledOption("adaptiveHeight")&&e._setHeight(),e._setPosition()):e._setPosition(!1)}},{key:"_callSliderEvent",value:function(e,t){r(e)&&e.apply(this,[].concat(Array.prototype.slice.call(arguments)).slice(1))}},{key:"_resetDrag",value:function(){var e=this;e._dragCoords.start=0,e._dragCoords.end=0}},{key:"_setHeight",value:function(){var e=this;e._container.style.height=e._slides[e.activeSlide-1].clientHeight+"px"}},{key:"_playSlider",value:function(){var e=this;e.options;e._isTouched||e._isMove||e._paused||e.nextSlide()}},{key:"_init",value:function(){var e=this;if(e._slider="string"==typeof e.options.selector?_.querySelector(e.options.selector):e.options.selector,null===e._slider)throw new Error("Selector "+e.options.selector+" does not exist");if(e._sliderWidth=e._slider.getBoundingClientRect().width,e._slides=[].slice.call(e._slider.children),e._isMove=!1,e._isTouched=!1,e._play=!1,e._paused=!1,e._container=null,e._track=null,e._nav=null,e._pagination=null,e._transformX=null,e._touch=null,e._resizeTimer=null,e._playTimer=null,e.options.draggable===!0&&(e._dragCoords={start:0,end:0}),e.slidesLength=e._slides.length,e.activeSlide=e.options.activeSlide,e.activeSlide<1||e.activeSlide>e.slidesLength)throw new Error("Slide index "+e.activeSlide+" does not exist")}},{key:"_build",value:function(){var e=this,t=e.options,i=e._slider,n=e._slides,a=n[e.activeSlide-1],s=_.createElement("div"),o=_.createElement("div"),l=_.createDocumentFragment();e.isEnabledOption("fade")||(e._transformX=Math.ceil(-e._sliderWidth*(e.activeSlide-1))),i.setAttribute("data-crystal-id",e._id),i.classList.add(e._id),e.isEnabledOption("draggable")&&i.classList.add(t.draggableCls),o.classList.add(t.trackCls),o.style.width=e._sliderWidth*e.slidesLength+"px",o.style[h]="translate3d("+e._transformX+"px, 0, 0)",s.classList.add(t.containerCls),s.appendChild(o),i.appendChild(s),n.forEach(function(i,n){var a=i.style;if(i.classList.add(t.slideCls),i.setAttribute("data-crystal-slide",n+1),a.width=100/e.slidesLength+"%",e.isEnabledOption("fade")&&(a.transition="opacity "+t.duration+"ms "+t.easing,a.left=-(parseFloat(a.width)*n)+"%"),e.isEnabledOption("fade")&&n!==e.activeSlide-1&&(a.opacity=0,a.zIndex=t.zIndex-1),e.isEnabledOption("titles")){var s=_.createElement("div");s.classList.add(t.titleCls),s.innerHTML=i.getAttribute("data-crystal-title"),i.appendChild(s)}l.appendChild(i)}),e.isEnabledOption("titles")&&(e._titles=i.querySelectorAll(""+t.titleCls)),o.appendChild(l),a.style.opacity=1,a.style.zIndex=t.zIndex,a.classList.add(t.activeCls),e._container=s,e._track=o,e.isEnabledOption("nav")&&e._createNav(),e.isEnabledOption("pagination")&&e._createPagination(),i.classList.add(t.sliderReadyCls),e.isEnabledOption("autoplay")&&e.play(),r(t.onReady)&&e._callSliderEvent(t.onReady,e,e.activeSlide,e.slidesLength)}},{key:"_createNav",value:function(){var e=this,t=e.options,i=_.createElement("div");if(i.classList.add(t.navCls),i.innerHTML='\n      <button role="button" class="'+(t.navBtnCls+" "+t.navPrevBtnCls)+'" data-crystal-button="prev">'+t.navPrevVal+'</button>\n\n      <button role="button" class="'+(t.navBtnCls+" "+t.navNextBtnCls)+'" data-crystal-button="next">'+t.navNextVal+"</button>\n    ",e._nav=i,t.appendNavTo){var n="string"==typeof t.appendNavTo?_.querySelector(t.appendNavTo):t.appendNavTo;if(null===n)return;n.appendChild(e._nav)}else e._slider.insertBefore(e._nav,e._container)}},{key:"_createPagination",value:function(){var e=this,t=e.options,i=_.createElement("ul"),n=_.createDocumentFragment();if(e._pagination=_.createElement("div"),e._pagination.classList.add(t.paginationCls),i.classList.add(t.paginationInnerCls),e._slides.forEach(function(i,a){var s=_.createElement("li"),o=void 0;e.isEnabledOption("thumbnails")?(o=_.createElement("img"),o.src=i.getAttribute("data-crystal-thumbnail")):(o=_.createElement("button"),o.textContent=a+1),o.setAttribute("role","button"),o.setAttribute("data-crystal-button",a+1),o.classList.add(t.paginationBtnCls),s.appendChild(o),s.classList.add(t.paginationItemCls),n.appendChild(s)}),i.appendChild(n),e._pagination.appendChild(i),t.appendNavTo){var a="string"==typeof t.appendPaginationTo?_.querySelector(t.appendPaginationTo):t.appendPaginationTo;if(null===a)return;a.appendChild(e._pagination)}else e._slider.appendChild(e._pagination);e._pagination.querySelectorAll("."+t.paginationBtnCls)[e.activeSlide-1].classList.add(t.activeCls),e._disableNavBtns()}},{key:"_bindEvents",value:function(){var e=this,t=e._slider,i=e._track,n=e._nav,a=["_mouseClickHandler","_mouseEnterHandler","_mouseLeaveHandler","_touchStartHandler","_touchMoveHandler","_touchEndHandler","_keyUpHandler","_transitionEndHandler","_setHeight","_updateWidth","_resizeHandler"];a.forEach(function(t){e[t]=e[t].bind(e)}),window.addEventListener("resize",e._resizeHandler),e.isEnabledOption("adaptiveHeight")&&window.addEventListener("load",e._setHeight),e.isEnabledOption("keyboard")&&window.addEventListener("keyup",e._keyUpHandler),_.addEventListener("DOMContentLoaded",e._updateWidth),e.isEnabledOption("nav")&&e._nav.addEventListener("click",e._mouseClickHandler),e.isEnabledOption("pagination")&&e._pagination.addEventListener("click",e._mouseClickHandler),e.isEnabledOption("pauseOnHover")&&(i.addEventListener("mouseenter",e._mouseEnterHandler),i.addEventListener("mouseleave",e._mouseLeaveHandler),n.addEventListener("mouseenter",e._mouseEnterHandler),n.addEventListener("mouseleave",e._mouseLeaveHandler)),t.addEventListener(f,e._transitionEndHandler),e.isEnabledOption("draggable")&&(e._dragCoords={start:0,end:0},i.addEventListener(e._isTouchDevice?"touchstart":"mousedown",e._touchStartHandler,!1),i.addEventListener(e._isTouchDevice?"touchmove":"mousemove",e._touchMoveHandler,!1),i.addEventListener(e._isTouchDevice?"touchend":"mouseup",e._touchEndHandler,!1),i.addEventListener("mouseleave",e._touchEndHandler))}},{key:"_unbindEvents",value:function(){var e=this,t=(e._slider,e._track);e.isEnabledOption("keyboard")&&window.removeEventListener("keyup",e._keyUpHandler),window.removeEventListener("resize",e._resizeHandler),e.isEnabledOption("nav")&&e._nav.removeEventListener("click",e._mouseClickHandler),e.isEnabledOption("pagination")&&e._pagination.removeEventListener("click",e._mouseClickHandler),e.isEnabledOption("pauseOnHover")&&(t.removeEventListener("mouseenter",e._mouseEnterHandler),t.removeEventListener("mouseleave",e._mouseLeaveHandler)),e.isEnabledOption("draggable")&&(t.removeEventListener(e._isTouchDevice?"touchstart":"mousedown",e._touchStartHandler),t.removeEventListener(e._isTouchDevice?"touchmove":"mousemove",e._touchMoveHandler),t.removeEventListener(e._isTouchDevice?"touchend":"mouseup",e._touchEndHandler),t.removeEventListener("mouseleave",e._touchEndHandler))}},{key:"_mouseClickHandler",value:function(e){var t=this,i=t.options,n=e.target,a=n.classList,s=Number(n.getAttribute("data-crystal-button"));t._isTouched||t._isMove||(t._playClear(),a.contains(i.navBtnCls)&&("prev"===n.getAttribute("data-crystal-button")?t.prevSlide():t.nextSlide()),a.contains(i.paginationBtnCls)&&s!==t.activeSlide&&t.goToSlide(s))}},{key:"_mouseEnterHandler",value:function(e){var t=this;t.options;t.isEnabledOption("pauseOnHover")&&(t._paused=!0)}},{key:"_mouseLeaveHandler",value:function(e){var t=this;t.isEnabledOption("pauseOnHover")&&(t._paused=!1)}},{key:"_touchStartHandler",value:function(e){var t=this;t._isTouchDevice||e.preventDefault(),e.stopPropagation(),t._isMove||"mousedown"===e.type&&e.button>0||(t._isTouchDevice&&1===e.touches.length&&(t._touch=e.changedTouches[0]),t._isTouched=!0,t._dragCoords.end=t._dragCoords.start=t._touch?t._touch.pageX:e.pageX,t._slider.classList.add(t.options.touchCls))}},{key:"_touchMoveHandler",value:function(e){var t=this;t._isTouchDevice||e.preventDefault(),e.stopPropagation(),t._isTouched&&!t._isMove&&(t._isTouchDevice&&e.changedTouches[0].identifier!==t._touch.identifier||(t._dragCoords.end=t._touch?e.changedTouches[0].pageX:e.pageX,t.isEnabledOption("fade")||(t._track.style.transform="translate3d("+(t._transformX+(t._dragCoords.end-t._dragCoords.start))+"px, 0, 0)")))}},{key:"_touchEndHandler",value:function(e){e.stopPropagation();var t=this,i=t.options,n=t._dragCoords.start,a=t._dragCoords.end,s=n-a,o=t.activeSlide;if(!t._isMove&&(!t._isTouchDevice||e.changedTouches[0].identifier===t._touch.identifier)&&(t._isTouched=!1,t._slider.classList.remove(i.touchCls),t._resetDrag(),s))return Math.abs(s)<=i.threshold?void t._setPosition(!1):!i.loop&&(o<=1&&s<0||o>=t.slidesLength&&s>0)?void t._setPosition(!1):void(n>a?t.nextSlide():t.prevSlide())}},{key:"_transitionEndHandler",value:function(){var e=this;e._slider.classList.remove(e.options.touchCls)}},{key:"_keyUpHandler",value:function(e){e.preventDefault(),e.stopPropagation();var t=this,i={left:37,right:39};if(!t._isMove&&t.isEnabledOption("keyboard"))switch(e.keyCode){case i.left:t.prevSlide();break;case i.right:t.nextSlide()}}},{key:"_updateWidth",value:function(){var e=this,t=e._track;e._resizeTimer&&clearTimeout(e._resizeTimer),e._resizeTimer=setTimeout(function(){e.windowWidth=window.innerWidth,e._sliderWidth=e._slider.getBoundingClientRect().width,e.isEnabledOption("fade")||(e._transformX=Math.ceil(-e._sliderWidth*(e.activeSlide-1))),t.style.width=e._sliderWidth*e.slidesLength+"px",t.style[h]="translate3d("+e._transformX+"px, 0, 0)",e.isEnabledOption("adaptiveHeight")&&e._setHeight()},50)}},{key:"_resizeHandler",value:function(){this._updateWidth()}},{key:"prevSlide",value:function(){var e=this,t=e.options,i=e.activeSlide-1;e.activeSlide<=1&&!e.isEnabledOption("loop")||(i<1&&(i=e.slidesLength),r(t.beforeChange)&&t.beforeChange.call(e,e,e.activeSlide,i,e.slidesLength),e.activeSlide<=1&&e.isEnabledOption("loop")?e.activeSlide=e.slidesLength:e.activeSlide-=1,e._setActiveSlide())}},{key:"nextSlide",value:function e(){var t=this,i=t.options,e=t.activeSlide+1;return t.activeSlide>=t.slidesLength&&!t.isEnabledOption("loop")?void(t._paused=!0):(e>t.slidesLength&&(e=1),r(i.beforeChange)&&i.beforeChange.call(t,t,t.activeSlide,e,t.slidesLength),t.activeSlide>=t.slidesLength&&t.isEnabledOption("loop")?t.activeSlide=1:t.activeSlide+=1,void t._setActiveSlide())}},{key:"goToSlide",value:function(e){var t=this,i=this.options;!u(e)||e<1&&e>t.slidesLength||(r(i.beforeChange)&&t._callSliderEvent(i.beforeChange,t,t.activeSlide,e,t.slidesLength),t.activeSlide=e,t._setActiveSlide())}},{key:"play",value:function(){var e=this,t=e.options;e._playClear(),e._play=!0,e._playTimer=setInterval(function(){return e._playSlider()},t.playInterval)}},{key:"stop",value:function(){var e=this;e._play=!1,e._paused=!1,e._playClear()}},{key:"_playClear",value:function(){var e=this;e._playTimer&&clearInterval(e._playTimer)}},{key:"isEnabledOption",value:function(e){return this.options[e]===!0||!1}},{key:"destroy",value:function(){var e=this,t=e._slider;e._track;t.removeAttribute("id"),t.classList.remove(opts.sliderReadyCls,e._id,opts.draggableCls),e._slides.forEach(function(e){e.classList.remove(opts.slideCls,opts.activeCls),e.removeAttribute("style"),e.removeAttribute("data-crystal-slide")}),e.isEnabledOption("nav")&&l(e._nav),e.isEnabledOption("pagination")&&l(e._pagination),e.isEnabledOption("titles")&&t.querySelectorAll("."+opts.titleCls).forEach(function(e){return l(e)}),o(e._track),o(e._container),e._resizeTimer&&clearTimeout(e._resizeTimer),e._playClear()}},{key:"reinit",value:function(e){var t=this;t.destroy(),c(e)&&(t.options=n(t.options,e)),t._init(),t._build(),t._bindEvents(),t.isEnabledOption("adaptiveHeight")&&t._setHeight()}}]),e}();t.default=y,e.exports=t.default}])});